click (0.4.0) saucy; urgency=low

  [ Colin Watson ]
  * Add "installed-size" as a mandatory field in the control area's
    "manifest" file; it should not be present in source manifest files, and
    is generated automatically by "click build".
  * Add an optional "icon" manifest key.
  * Consistently call clickpreload_init from preloaded functions in case
    they happen to be called before libclickpreload's constructor.
  * Run dpkg with --force-bad-path so that /sbin and /usr/sbin are not
    required to be on $PATH; we don't use the tools dpkg gets from there.

  [ Lo√Øc Minier ]
  * Add fopen64 wrapper (LP: #1218674).

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 30 Aug 2013 17:59:34 +0100

click (0.3.4) saucy; urgency=low

  * Make "click desktophook" tolerate dangling symlinks in
    ~/.local/share/applications/.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 28 Aug 2013 18:00:55 +0200

click (0.3.3) saucy; urgency=low

  * Recommend click-apparmor from click (suggested by Jamie Strandboge).

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 28 Aug 2013 12:17:23 +0200

click (0.3.2) saucy; urgency=low

  [ Jamie Strandboge ]
  * Document maintainer as an optional field.

  [ Matthias Klumpp ]
  * Support PackageKit 0.8 API.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 27 Aug 2013 21:07:02 +0200

click (0.3.1) saucy; urgency=low

  [ Colin Watson ]
  * Fix some more failures with mock 0.7.2.
  * Work around the lack of a python-apt backport of
    apt_pkg.TagFile(sequence, bytes=True) to precise.

  [ Jamie Strandboge ]
  * Codify allowed characters for "application ID".
  * Fix typos in apparmor hook example.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 13 Aug 2013 10:10:11 +0200

click (0.3.0) saucy; urgency=low

  * Insert a new "_click-binary" ar member immediately after
    "debian-binary"; this allows detecting the MIME type of a Click package
    even when it doesn't have the extension ".click" (LP: #1205346).
  * Declare the application/x-click MIME type, since the shared-mime-info
    upstream would rather not take the patch there at this point
    (https://bugs.freedesktop.org/show_bug.cgi?id=66689).
  * Make removal of old links for single-version hooks work even when the
    application ID is not a prefix of the pattern's basename.
  * Add an optional Hook-Name field to hook files, thereby allowing multiple
    hooks to attach to the same virtual name.
  * Rename click's own "desktop" hook to "click-desktop", making use of the
    new Hook-Name facility.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 06 Aug 2013 11:08:46 +0100

click (0.2.10) saucy; urgency=low

  * Force click's stdout encoding to UTF-8 regardless of the locale.
  * Don't encode non-ASCII characters in JSON dumps.
  * Treat manifests as UTF-8.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 30 Jul 2013 15:14:16 +0100

click (0.2.9) saucy; urgency=low

  * Tolerate dangling source symlinks in "click desktophook".
  * Handle the case where the clickpkg user cannot read the .click file,
    using some LD_PRELOAD trickery to allow passing it as a file descriptor
    opened by the privileged process (LP: #1204523).
  * Remove old links for single-version hooks when installing new versions
    (LP: #1206115).

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 29 Jul 2013 16:56:42 +0100

click (0.2.8) saucy; urgency=low

  * Check in advance whether the root is writable by the clickpkg user, not
    just by root, and do so in a way less vulnerable to useful exception
    text being eaten by a subprocess preexec_fn (LP: #1204570).
  * Actually install
    /var/lib/polkit-1/localauthority/10-vendor.d/com.ubuntu.click.pkla in
    the packagekit-plugin-click binary package.

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 25 Jul 2013 17:40:49 +0100

click (0.2.7) saucy; urgency=low

  * Fix error message when rejecting "_" from a package name or version
    (LP: #1204560).

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 24 Jul 2013 16:42:59 +0100

click (0.2.6) saucy; urgency=low

  * Adjust written .desktop files to avoid tickling some bugs in Unity 8's
    parsing.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 24 Jul 2013 08:03:08 +0100

click (0.2.5) saucy; urgency=low

  * Ensure that ~/.local/share/applications exists if we need to write any
    .desktop files.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 24 Jul 2013 07:44:44 +0100

click (0.2.4) saucy; urgency=low

  * Mangle Icon in .desktop files to point to an absolute path within the
    package unpack directory if necessary.
  * Add a "--" separator between aa-exec's options and the subsidiary
    command, per Jamie Strandboge.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 23 Jul 2013 23:38:29 +0100

click (0.2.3) saucy; urgency=low

  * Set Path in generated .desktop files to the top-level package directory.
  * Revert part of geteuid() change in 0.2.2; ClickUser._drop_privileges and
    ClickUser._regain_privileges need to check the real UID, or else they
    will never regain privileges.
  * When running a hook, set HOME to the home directory of the user the hook
    is running as.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 23 Jul 2013 22:57:03 +0100

click (0.2.2) saucy; urgency=low

  * dh_click: Support --name option.
  * Avoid ClickUser.__iter__ infecting its caller with dropped privileges.
  * Use geteuid() rather than getuid() in several places to check whether we
    need to drop or regain privileges.
  * Add a user-level hook to create .desktop files in
    ~/.local/share/applications/.  (This should probably move to some other
    package at some point.)

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 23 Jul 2013 19:36:44 +0100

click (0.2.1) saucy; urgency=low

  * Fix "click help list".
  * Remove HOME from environment when running dpkg, so that it doesn't try
    to read .dpkg.cfg from it (which may fail when dropping privileges from
    root and produce a warning message).
  * Refuse to install .click directories at any level, not just the top.
  * Add "click pkgdir" command to print the top-level package directory from
    either a package name or a path within a package; based on work by Ted
    Gould, for which thanks.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 22 Jul 2013 09:36:19 +0100

click (0.2.0) saucy; urgency=low

  * Revise and implement hooks specification.  While many things have
    changed, the previous version was never fully implemented.  However, I
    have incremented the default Click-Version value to 0.2 to reflect the
    design work.
    - The "hooks" manifest key now contains a dictionary keyed by
      application name.  This means manifest authors have to repeat
      themselves much less in common cases.
    - There is now an explicit distinction between system-level and
      user-level hooks.  System-level hooks may reflect multiple concurrent
      versions, and require a user name.
    - Hook symlinks are now named by a combination of the Click package
      name, the application name, and the Click package version.
    - The syntax of Pattern has changed to make it easier to extend with new
      substitutions.
  * Reject '_' and '/' characters in all of package name, application name,
    and package version.

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 19 Jul 2013 13:11:31 +0100

click (0.1.7) saucy; urgency=low

  * Correct name of .pkla file (now
    /var/lib/polkit-1/localauthority/10-vendor.d/com.ubuntu.click.pkla).

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 18 Jul 2013 17:00:46 +0100

click (0.1.6) saucy; urgency=low

  * Move defaults for frameworks and hooks directories to click.paths.
  * Install /var/lib/polkit-1/localauthority/10-vendor.d/10-click.pkla to
    allow the phablet user to install Click packages without being known to
    logind, as a temporary workaround.

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 18 Jul 2013 16:55:08 +0100

click (0.1.5) saucy; urgency=low

  * Fix infinite recursion in ClickUser.click_pw.
  * When all the files requested for installation are Click packages,
    override org.freedesktop.packagekit.package-install* PolicyKit actions
    to com.ubuntu.click.package-install, defined with a more open default
    policy.  (This requires some backports to PackageKit, not in the archive
    yet.)

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 17 Jul 2013 15:46:48 +0100

click (0.1.4) saucy; urgency=low

  * Add support for per-user package registration.
  * Move install log file from $root/.click.log to $root/.click/log.
  * Add an autotools-based build system for our C components.
  * Initial version of a PackageKit plugin, in a new packagekit-plugin-click
    package; still experimental.
  * Restore compatibility with Python 3.2 (LP: #1200670).
  * Adjust tests to pass with mock 0.7.2 (as in Ubuntu 12.04 LTS).
  * Make the default root directory a configure option.
  * Add a simple "click list" command.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 15 Jul 2013 15:55:48 +0100

click (0.1.3) saucy; urgency=low

  * Rename to click, per Mark Shuttleworth.

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 27 Jun 2013 15:57:25 +0100

click-package (0.1.2) saucy; urgency=low

  * Disable dh_sphinxdoc for builds that are not building
    architecture-independent packages.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 25 Jun 2013 18:57:47 +0100

click-package (0.1.1) saucy; urgency=low

  * clickpackage.tests.test_install: Set NO_PKG_MANGLE when building fake
    packages, to avoid having Maintainer fields mangled on the buildds.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 25 Jun 2013 17:32:00 +0100

click-package (0.1) saucy; urgency=low

  * Initial release.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 24 Jun 2013 14:43:21 +0100
